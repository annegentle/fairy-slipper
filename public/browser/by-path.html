<div class="page-header">
  <h1>
    {{ swagger.info.title }}
  </h1>
</div>

<div ng-repeat="operations in paths | orderBy: '$key'">
  <h2>
    <swagger-path path="operations.$key"
                  parameters="operations[0].parameters">
    </swagger-path>
  </h2>
  <accordion>
    <accordion-group ng-repeat="operation in operations">
      <accordion-heading>
        <div class="operation-header">
          <div class="operation-method">
            <swagger-method method="operation.method"></swagger-method>
          </div>
          <div class="operation-title">
            <h3>
              {{ operation.title }}
              <br/>
              <small>{{ operation.summary }}</small>
            </h3>
          </div>
        </div>
      </accordion-heading>
      <div class="row">
        <div class="col-md-12">
        </div>
        <div ng-controller="ParametersCtrl" class="col-md-6">
          <tabset>
            <tab heading="Description">
              <div class="content" marked="operation.description"></div>
            </tab>
            <tab heading="Details">
              <div ng-if="parameters.header">
                <h4>Headers</h4>
                <dl>
                  <dt ng-repeat-start="parameter in parameters.header">{{parameter.name}}
                  </dt>
                  <dd ng-repeat-end>{{parameter.description}}</dd>
                </dl>
              </div>
              <div ng-if="parameters.query">
                <h4>URL Parameters</h4>
                <dl>
                  <dt ng-repeat-start="parameter in parameters.query">{{parameter.name}}
                  </dt>
                  <dd ng-repeat-end>{{parameter.description}}</dd>
                </dl>
              </div>
              <div ng-if="parameters.body">
                <h4>Request Schema</h4>
                <swagger-schema swagger="swagger" parameters="parameters.body"></swagger-schema>
              </div>
            </tab>
          </tabset>
        </div>
        <div class="col-md-6">
          <h4>Responses</h4>
          <accordion close-others="true">
            <accordion-group ng-repeat="(status_code, response) in operation.responses"
                             is-disabled="!response.examples['application/json']"
                             is-open="status.open">
              <accordion-heading>
                {{ status_code }}: {{ response.description }}
                <i ng-if="response.examples['application/json']"
                   class="pull-right glyphicon"
                   ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i>
              </accordion-heading>
              <swagger-example swagger="swagger"
                               src="response.examples"
                               mimetype="'application/json'"
                               trigger-load="status.open">
              </swagger-example>
            </accordion-group>
          </accordion>
        </div>
      </div>
    </accordion-group>
  </accordion>
</div>
